"use strict";(self.webpackChunkzeuz_docs=self.webpackChunkzeuz_docs||[]).push([[899],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var s=t(96540);const i={},a=s.createContext(i);function o(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:n},e.children)}},40468:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"zeuz-node/zeuz-api-examples","title":"ZeuZ API examples","description":"ZeuZ API provides an external interface for clients to interact with","source":"@site/docs/zeuz-node/zeuz-api-examples.md","sourceDirName":"zeuz-node","slug":"/zeuz-node/zeuz-api-examples","permalink":"/docs/zeuz-node/zeuz-api-examples","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"zeuz-api-examples","title":"ZeuZ API examples"},"sidebar":"docsSidebar","previous":{"title":"Variables and Indexed Access","permalink":"/docs/zeuz-node/variables-and-indexed-access"},"next":{"title":"ZeuZ features","permalink":"/docs/zeuz-node/zeuz-features"}}');var i=t(74848),a=t(28453);const o={id:"zeuz-api-examples",title:"ZeuZ API examples"},r=void 0,d={},c=[{value:"Deploy Test Sets",id:"deploy-test-sets",level:2},{value:"Get access token [API Doc]",id:"get-access-token-api-doc",level:3},{value:"[OPT] Verify Test Set [API Doc]",id:"opt-verify-test-set-api-doc",level:3},{value:"[OPT] Verify milestone [API Doc]",id:"opt-verify-milestone-api-doc",level:3},{value:"[OPT] Create on-demand ZeuZ Node",id:"opt-create-on-demand-zeuz-node",level:3},{value:"Get ZeuZ Node (machine) ID [API Doc]",id:"get-zeuz-node-machine-id-api-doc",level:3},{value:"Deploy/Run Test Set [API Doc]",id:"deployrun-test-set-api-doc",level:3},{value:"Check Deploy/Run history/status/details",id:"check-deployrun-historystatusdetails",level:2}];function l(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["ZeuZ API provides an external interface for clients to interact with\nthe server and fetch various information. Complete API documentation\ncan be found\n",(0,i.jsx)(n.a,{href:"https://documenter.getpostman.com/view/10815312/SzfAzSWj",children:"here"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"This page lists example scenarios for using the API."}),"\n",(0,i.jsx)(n.h2,{id:"deploy-test-sets",children:"Deploy Test Sets"}),"\n",(0,i.jsxs)(n.p,{children:["Steps which are marked ",(0,i.jsx)(n.strong,{children:"[OPT]"})," can be skipped if you already know\nthat the data is valid (for example, you already know that a Milestone\nexists for a given ID, or a Test Set with the given name already\nexists)."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.h3,{id:"get-access-token-api-doc",children:["Get access token ",(0,i.jsx)(n.a,{href:"https://documenter.getpostman.com/view/10815312/SzfAzSWj#1a9da524-6944-4591-ae61-937b58aa3021",children:"[API Doc]"})]}),"\n",(0,i.jsxs)(n.p,{children:["First, you need to get an access (Bearer) token through which the\nZeuZ server will be able to identify that any request that you're\nmaking is actually ",(0,i.jsx)(n.em,{children:"you"}),' and not someone else. For this, you will\nneed to provide the server an API Key, which can be found from your\n"Profile > Api Key" Key tab (click Generate if none is present).']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --location --request GET 'https://qa.zeuz.ai/api/auth/token/verify?api_key=2a69d429-fa4d-47ec-a8d7-eff88bf063ef'\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In this case, the API Key is\n",(0,i.jsx)(n.code,{children:"2a69d429-fa4d-47ec-a8d7-eff88bf063ef"}),". This will return a JSON\nobject with two keys ",(0,i.jsx)(n.code,{children:"token"})," and ",(0,i.jsx)(n.code,{children:"status"}),". This ",(0,i.jsx)(n.code,{children:"token"})," value needs\nto be sent to the server with any subsequent API requests as an\nAuthorization header as you will see in the next steps."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Authorization: Bearer TOKEN_HERE\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.h3,{id:"opt-verify-test-set-api-doc",children:["[OPT] Verify Test Set ",(0,i.jsx)(n.a,{href:"https://documenter.getpostman.com/view/10815312/SzfAzSWj#b65c5729-74a1-4bc4-89cc-85c1da5e3505",children:"[API Doc]"})]}),"\n",(0,i.jsx)(n.p,{children:'Next, you will need to get the Test Set that you want to run/deploy\nusing API. You can create a Test Set by navigating to "Testing >\nSet > New Set". Add the test cases that you want to run as part of\nthis test set. You can verify that the test set is accessible via\nthe API using the following request.'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --location --request GET 'https://qa.zeuz.ai/api/set/list?project=PROJ-17&team=2&search_term=cicd' \\\n--header 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmdWxsX25hbWUiOiJNb2hhbW1lZCBTYXppZCBBbCBSYXNoaWQiLCJ1c2VybmFtZSI6InNhemlkIiwiaWQiOjMzLCJleHAiOjE2MDg5NTQ4OTF9.trywpchrfW5WvFdgglbNGyzRbeVdybq1H8wLfjiSMQo'\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In this case ",(0,i.jsx)(n.code,{children:"project"})," and ",(0,i.jsx)(n.code,{children:"team"})," can be found by clicking on your\nusername. Take the values inside parentheses. ",(0,i.jsx)(n.code,{children:"search_term"})," is the\nname of the set that you just created. For this example, it is\n",(0,i.jsx)(n.code,{children:"cicd"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.h3,{id:"opt-verify-milestone-api-doc",children:["[OPT] Verify milestone ",(0,i.jsx)(n.a,{href:"https://documenter.getpostman.com/view/10815312/SzfAzSWj#ae90b979-b8a1-4823-869b-f0f81019d6df",children:"[API Doc]"})]}),"\n",(0,i.jsxs)(n.p,{children:["You need to provide the ",(0,i.jsx)(n.strong,{children:"ID"}),' of a Milestone. This can be\nfound from "Project > Milestone (Others)". It is better to choose a\nmilestone that has the "Started" status.']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --location --request GET 'https://qa.zeuz.ai/api/milestones/list?project=PROJ-17&team=2&status=started' \\\n--header 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmdWxsX25hbWUiOiJNb2hhbW1lZCBTYXppZCBBbCBSYXNoaWQiLCJ1c2VybmFtZSI6InNhemlkIiwiaWQiOjMzLCJleHAiOjE2MDg5NTQ4OTF9.trywpchrfW5WvFdgglbNGyzRbeVdybq1H8wLfjiSMQo'\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"status"})," can be either ",(0,i.jsx)(n.strong,{children:"started"})," or ",(0,i.jsx)(n.strong,{children:"not_started"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.h3,{id:"opt-create-on-demand-zeuz-node",children:"[OPT] Create on-demand ZeuZ Node"}),"\n",(0,i.jsx)(n.p,{children:"You can also create an On-demand ZeuZ Node that runs in your ZeuZ Server.\nThis enables you to run test cases without even having a ZeuZ Node running already."}),"\n",(0,i.jsxs)(n.p,{children:["To acheive this, you first need to get the current user's ",(0,i.jsx)(n.code,{children:"uid"})," and ",(0,i.jsx)(n.code,{children:"username"}),".\nThis can be fetched via the following ",(0,i.jsx)(n.a,{href:"https://documenter.getpostman.com/view/10815312/SzfAzSWj#8a04ed77-99c4-4ad0-9926-a87f80afdf32",children:"API call"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --location --request GET 'https://qa.zeuz.ai/api/user' \\\n--header 'Authorization:\neyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmdWxsX25hbWUiOiJNb2hhbW1lZCBTYXppZCBBbCBSYXNoaWQiLCJ1c2VybmFtZSI6InNhemlkIiwiaWQiOjMzLCJleHAiOjE2MDg5NTQ4OTF9.trywpchrfW5WvFdgglbNGyzRbeVdybq1H8wLfjiSMQo'\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n    {\n        "username": "hello",\n        "full_name": "Hello World",\n        "profile_picture_name": "cat.png",\n        "uid": 10,\n        "designation": null,\n        "department": null,\n        "is_active": true,\n        "team_id": 2,\n        "project_id": "PROJ-17"\n    }\n]\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Note that this may return multiple results for the same user\n(multiple team and projects). You can simply parse the ",(0,i.jsx)(n.code,{children:"uid"})," and\n",(0,i.jsx)(n.code,{children:"username"})," from this response from the first item of the list."]}),"\n",(0,i.jsx)(n.p,{children:"Next, make the following request to deploy an on-demand node in\nthe ZeuZ Server."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --location --request GET 'https://qa.zeuz.ai/Home/ManageMachine/on_demand_node?user_id=10&username=hello'\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Substitute ",(0,i.jsx)(n.code,{children:"user_id"})," and ",(0,i.jsx)(n.code,{children:"username"})," with the ones you received\nfrom the previous response. This API call will result in the\nfollowing response:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "node_id": "hello_7219_ondemand"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["You can now use this ",(0,i.jsx)(n.code,{children:"node_id"})," value in the next step."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.h3,{id:"get-zeuz-node-machine-id-api-doc",children:["Get ZeuZ Node (machine) ID ",(0,i.jsx)(n.a,{href:"https://documenter.getpostman.com/view/10815312/SzfAzSWj#3439a31e-c965-4fbc-83b7-b4727fef7a88",children:"[API Doc]"})]}),"\n",(0,i.jsxs)(n.p,{children:['You need to get the ZeuZ Node/machine ID to tell the server that\nyou want to deploy/run your test set in that particular\nmachine/zeuz node. If you have ZeuZ Node installed locally,\nnavigate to the folder where it is installed (usually "Desktop >\nZeuZ_Node") and open the ',(0,i.jsx)(n.code,{children:"node_id.conf"})," file. The ",(0,i.jsx)(n.code,{children:"id"})," specified\nhere will become a part of the name of the machine. For example, if\nmy username is ",(0,i.jsx)(n.strong,{children:"foo"})," and the ",(0,i.jsx)(n.code,{children:"id"})," specified in ",(0,i.jsx)(n.code,{children:"node_id.conf"}),"\nfile is set to ",(0,i.jsx)(n.strong,{children:"cicd"}),", the name of the ZeuZ Node instance will\nbecome available as ",(0,i.jsx)(n.strong,{children:"foo_cicd"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:' [\n     {\n         "id": 716,\n         "name": "foo_cicd",\n         "user_level": "Automation",\n         "last_updated_time": "Thu-Nov-26-04:58:16-2020"\n     }\n ]\n'})}),"\n",(0,i.jsxs)(n.p,{children:["You will need to grab the ",(0,i.jsx)(n.code,{children:"id"})," field from here. The above is an\nexample response for the following request:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --location --request GET 'https://qa.zeuz.ai/api/machines/list?project=PROJ-17&team=2' \\\n--header 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmdWxsX25hbWUiOiJNb2hhbW1lZCBTYXppZCBBbCBSYXNoaWQiLCJ1c2VybmFtZSI6InNhemlkIiwiaWQiOjMzLCJleHAiOjE2MDg5NTQ4OTF9.trywpchrfW5WvFdgglbNGyzRbeVdybq1H8wLfjiSMQo'\n\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.h3,{id:"deployrun-test-set-api-doc",children:["Deploy/Run Test Set ",(0,i.jsx)(n.a,{href:"https://documenter.getpostman.com/view/10815312/SzfAzSWj#2a542025-5b65-464a-843a-9d7a38f73349",children:"[API Doc]"})]}),"\n",(0,i.jsx)(n.p,{children:"Now you can deploy/run your test set using the following request:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl --location --request POST \'https://qa.zeuz.ai/api/run/submit\' \\\n--header \'Content-Type: application/json\' \\\n--header \'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmdWxsX25hbWUiOiJNb2hhbW1lZCBTYXppZCBBbCBSYXNoaWQiLCJ1c2VybmFtZSI6InNhemlkIiwiaWQiOjMzLCJleHAiOjE2MDg5NTQ4OTF9.trywpchrfW5WvFdgglbNGyzRbeVdybq1H8wLfjiSMQo\' \\\n--data-raw \'{\n"test_set_name": "cicd",\n"dependency": {\n    "Brower": "Chrome",\n    "OS": "Windows"\n},\n"email_receiver":[\n    "riz@gmail.com",\n    "minar@gmail.com",\n    "shetu2153@gmail.com"\n],\n"objective": "Sample Objective",\n"milestone": "190",\n"project_id": "PROJ-17",\n"team_id": 2,\n"run_time_params": {\n    "server": {\n        "field": "qa1",\n        "subfield": "https://demo.zeuz.ai"\n    }\n},\n"machine": 41,\n"loop": "1",\n"run_time_settings": {\n    "threading": false,\n    "take_screenshot": true,\n    "debug_mode": false,\n    "upload_log_file_only_for_fail": true\n},\n"branch_version": [\n    "driver: 1.0.01",\n    "browser: 1.2.1"\n],\n"start_date": "2019-10-31",\n"end_date": "2019-10-31",\n"domain": "https://qa.zeuz.ai"\n}\'\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"domain [str]"}),": Doman name of the server."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"start_date"})," and ",(0,i.jsx)(n.code,{children:"end_date"})," [str]: These can be set to any date (you\ncan set it to your current date)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"branch_version [array(str)]"}),": Used to specify the version. Can be empty ",(0,i.jsx)(n.code,{children:"[]"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"run_time_settings [array(str)]"}),": Used to control ZeuZ Node behavior. Keep\nthem as is if you don't want to modify default settings."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"loop [int]"}),": Indicates how many times to run the selected Test Set."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"machine [int]"}),": ZeuZ Node/machine ID (you need to specify the ID and\nnot the name)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"run_time_params [object(object(str))]"}),': Specify any run time\nparameter. These can be obtained from "Testing > Run Tests". In\nthis example ',(0,i.jsx)(n.code,{children:"server"})," is the name of the runtime parameter. Its\nvalue is ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://demo.zeuz.ai",children:"https://demo.zeuz.ai"})})," which is part of the\n",(0,i.jsx)(n.code,{children:"subfield"})," key. The ",(0,i.jsx)(n.code,{children:"field"})," key can be set to anything and will\nbe ignored."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"team_id [int]"}),': Team ID can be found from "Profile".']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"project_id [str]"}),': Project ID can be found from "Profile".']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"milestone [str]"}),": ID of the selected milestone. Needs to\nprovided as a string. See step #3."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"objective [str]"}),": Any string can be specified as an objective.\nIndicates the objective of the deploy/run."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"email_receivers [array(str)]"}),": List of emails to send reports\nto."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"dependency [object(str)]"}),": Specify the OS and and browser that\nyou want to deploy the test set for. For iOS/Android you can set\n",(0,i.jsx)(n.code,{children:"Mobile"})," key to ",(0,i.jsx)(n.strong,{children:"iOS"})," or ",(0,i.jsx)(n.strong,{children:"Android"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"test_set_name [str]"}),": Name of the test set to deploy/run. See\nstep #2."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Executing this API endpoint will give back the ",(0,i.jsx)(n.code,{children:"run_id"})," that you\ncan then use to periodically check for status."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "status": {\n        "status": "Submitted",\n        "count": 1\n    },\n    "run_id": "Fri-Nov-1-00:27:52-2019"\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"check-deployrun-historystatusdetails",children:"Check Deploy/Run history/status/details"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://documenter.getpostman.com/view/10815312/SzfAzSWj#a593befd-2c02-4b25-92a1-2f1629bd1fcc",children:"[API Doc]"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --location --request GET 'https://qa.zeuz.ai/api/run/status?run_id=Sun-Jul-7-08:39:13-2019' \\\n--header 'Authorization: Bearer\neyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmdWxsX25hbWUiOiJNb2hhbW1lZCBTYXppZCBBbCBSYXNoaWQiLCJ1c2VybmFtZSI6InNhemlkIiwiaWQiOjMzLCJleHAiOjE2MDg5NTQ4OTF9.trywpchrfW5WvFdgglbNGyzRbeVdybq1H8wLfjiSMQo'\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"run_id"})," parameter will be provided by the Deploy/Run Test set api which is\nmentioned above. Use this to fetch the status of any test set."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "status":{\n        "Passed":19\n    },\n    "run_id":"Sun-Jul-7-08:39:13-2019",\n    "detail":[\n        {\n            "tc_id":"TEST-3180",\n            "tc_name":"ABC Test",\n            "status":"Passed",\n            "test_case_type":"Automated",\n            "duration":"00:01:06",\n            "failreason":""\n        },\n        {\n            "tc_id":"TEST-3181",\n            "tc_name":"PQR Test",\n            "status":"Passed",\n            "test_case_type":"Automated",\n            "duration":"00:02:24",\n            "failreason":""\n        }\n    ],\n    "run_id_status":"Complete"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"run_id_status"})," represents the overall status of the whole run/deploy\nsession. It can be one of the three values - ",(0,i.jsx)(n.strong,{children:"Complete"}),",\n",(0,i.jsx)(n.strong,{children:"In-progress"}),", ",(0,i.jsx)(n.strong,{children:"Cancelled"}),". You're advised to make all the\ncharacters lower case if you want to compare the progress string."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);
"use strict";(self.webpackChunkzeuz_docs=self.webpackChunkzeuz_docs||[]).push([[1363],{2233:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"zeuz-node/access-shadow-root-elements","title":"Access Shadow Root Elements","description":"Overview","source":"@site/docs/zeuz-node/access-shadow-root-elements.md","sourceDirName":"zeuz-node","slug":"/zeuz-node/access-shadow-root-elements","permalink":"/docs/zeuz-node/access-shadow-root-elements","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Access Shadow Root Elements","sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Whitelist URLs/IPs for Node","permalink":"/docs/zeuz-node/ip-url-whitelist"},"next":{"title":"Install ZeuZ Node on macOS","permalink":"/docs/zeuz-node/install-zeuz-node-on-macos"}}');var t=s(74848),i=s(28453);const o={title:"Access Shadow Root Elements",sidebar_position:5},l=void 0,d={},c=[{value:"Overview",id:"overview",level:2},{value:"Key Concepts",id:"key-concepts",level:3},{value:"User Input Structure",id:"user-input-structure",level:3},{value:"1. Shadow Root Parameters",id:"1-shadow-root-parameters",level:4},{value:"2. Target Element Parameters",id:"2-target-element-parameters",level:4},{value:"Traversal Workflow",id:"traversal-workflow",level:3},{value:"Rules and Restrictions",id:"rules-and-restrictions",level:3},{value:"Example Use Case",id:"example-use-case",level:3},{value:"Why are only CSS selectors used?",id:"why-are-only-css-selectors-used",level:3},{value:"Troubleshooting Tips",id:"troubleshooting-tips",level:3}];function a(e){const n={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"shadow_root_elements"})," function locates elements within one or more nested Shadow DOM (shadow root) levels on a web page. It is used when target elements are encapsulated inside Web Components or browser-internal pages that utilize Shadow DOM, where standard document queries (CSS or XPath) cannot access them directly."]}),"\n",(0,t.jsxs)(n.p,{children:["Internally, the function sequentially finds each shadow host and then accesses its shadow DOM, for example, using Selenium's ",(0,t.jsx)(n.code,{children:"shadow_root"})," method or a JavaScript call such as ",(0,t.jsx)(n.code,{children:"driver.execute_script('return arguments[0].shadowRoot', host)"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["This feature should be used when the required element is hidden within an open-mode shadow root and must be accessed through its host elements. Note that ",(0,t.jsx)(n.code,{children:"Element.shadowRoot"})," only returns the shadow DOM if the root is open; therefore, this function cannot access closed shadow roots."]}),"\n",(0,t.jsx)(n.p,{children:"This capability enables traversal through nested Shadow DOMs to locate target elements, which is essential for modern web applications that rely on encapsulation using Shadow DOM."}),"\n",(0,t.jsx)(n.h3,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Shadow Host"}),": Element that contains a Shadow Root."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Shadow Root"}),": An encapsulated subtree attached to a Shadow Host."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Parent Scope"}),": An optional container element for Shadow Hosts, specified using the ",(0,t.jsx)(n.code,{children:"parent"})," parameter."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"user-input-structure",children:"User Input Structure"}),"\n",(0,t.jsx)(n.p,{children:"Users define Shadow DOM traversal using step data by following these rules:"}),"\n",(0,t.jsx)(n.h4,{id:"1-shadow-root-parameters",children:"1. Shadow Root Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Format"}),": ",(0,t.jsx)(n.code,{children:"sr <index> <type> parameter"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"index"}),": An integer (e.g., 1, 2, 3.....) representing the nesting level. If omitted, it defaults to ",(0,t.jsx)(n.code,{children:"sr 1"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"type"}),": Use ",(0,t.jsx)(n.code,{children:"element parameter"})," to specify a Shadow Host or ",(0,t.jsx)(n.code,{children:"parent parameter"})," to define the container scope."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Allowed Attributes"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"id"}),", ",(0,t.jsx)(n.code,{children:"class"}),", ",(0,t.jsx)(n.code,{children:"tag"})," and any other attribute (e.g., ",(0,t.jsx)(n.code,{children:"title"}),", ",(0,t.jsx)(n.code,{children:"data-qa"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Text selectors are not supported"}),"; use attribute-based selectors instead."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'["id", "sr 1 parent parameter", "container"]\r\n["tag", "sr 1 element parameter", "user-profile"]\n'})}),"\n",(0,t.jsx)(n.h4,{id:"2-target-element-parameters",children:"2. Target Element Parameters"}),"\n",(0,t.jsxs)(n.p,{children:["Define the final element within the deepest Shadow Root using the standard ",(0,t.jsx)(n.code,{children:"element parameter"})," syntax, using only ",(0,t.jsx)(n.strong,{children:"CSS selectors"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'["class", "element parameter", "submit-button"]\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"traversal-workflow",children:"Traversal Workflow"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Process Parameters"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Group the ",(0,t.jsx)(n.code,{children:"sr"})," parameters based on their ",(0,t.jsx)(n.code,{children:"index"})," and ",(0,t.jsx)(n.code,{children:"type"})," (either ",(0,t.jsx)(n.code,{children:"element"})," or ",(0,t.jsx)(n.code,{children:"parent"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["Validate that indices are ",(0,t.jsx)(n.strong,{children:"unique"})," and follow a ",(0,t.jsx)(n.strong,{children:"sequential order"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"For Each Shadow Level"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Parent Scope (if provided)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Locate the parent container using a CSS selector."}),"\n",(0,t.jsxs)(n.li,{children:["Search for the Shadow Host ",(0,t.jsx)(n.strong,{children:"within the specified parent"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Shadow Host"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Construct a CSS selector using element attributes."}),"\n",(0,t.jsx)(n.li,{children:"Locate the element within the current root or parent scope."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Enter Shadow Root"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Access it using ",(0,t.jsx)(n.code,{children:"element.shadowRoot"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Fail the operation if no Shadow Root exists."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Locate Target Element"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["After traversing all Shadow Roots, proceed with the operation:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Construct the CSS selector for the final element."}),"\n",(0,t.jsx)(n.li,{children:"Return the element(s) from the deepest Shadow Root."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"rules-and-restrictions",children:"Rules and Restrictions"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Selector Types"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Shadow Hosts"}),": Use CSS selectors only; XPath and text-based selectors are not supported."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Target Elements"}),": Except for the first level, use CSS selectors only; before entering the Shadow DOM, there are no restrictions on selector type."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Index Handling"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["If the index is omitted, ",(0,t.jsx)(n.code,{children:"sr 1"})," is assumed implicitly."]}),"\n",(0,t.jsxs)(n.li,{children:["Consecutive indices are required (e.g., ",(0,t.jsx)(n.code,{children:"sr 1"})," must be followed by ",(0,t.jsx)(n.code,{children:"sr 2"}),")."]}),"\n",(0,t.jsx)(n.li,{children:"A parent is not required; one level may contain a parent, while another level may not."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parent Scoping"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The parent must exist within the current root, either the main document or an active Shadow Root."}),"\n",(0,t.jsxs)(n.li,{children:["The Shadow Host is searched ",(0,t.jsx)(n.strong,{children:"within the specified parent element"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Error Cases"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Shadow Host was not found."}),"\n",(0,t.jsx)(n.li,{children:"The element has no Shadow Root."}),"\n",(0,t.jsx)(n.li,{children:"The index or parameter format is invalid."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"example-use-case",children:"Example Use Case"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"HTML"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<div id="app"> \x3c!-- Parent for 1st Shadow Host --\x3e\r\n  <user-card> \x3c!-- Shadow Host (Level 1) --\x3e\r\n\t#shadow-root\r\n\t\x3c!-- Inside user-card\'s Shadow Root --\x3e\r\n\t<div class="profile"> \x3c!-- Shadow Host (Level 2) --\x3e\r\n\t  #shadow-root\r\n\t    <button class="save">Save</button> \x3c!-- Target --\x3e\r\n\t</div>\r\n  </user-card> \r\n</div>\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Step Data"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'shadow_root_ds = [\r\n    ["id", "sr 1 parent parameter", "app"],          # Parent of 1st Shadow Host\r\n    ["tag", "sr 1 element parameter", "user-card"],  # Shadow Host (Level 1)\r\n    ["class", "sr 2 element parameter", "profile"]   # Shadow Host (Level 2)\r\n]\r\n\r\nelement_ds = [\r\n    ["class", "element parameter", "save"]           # Target element\r\n    ["click", "selenium action", "click"]\r\n]\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"The user must provide all of this data in a single action."})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Traversal"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Find the parent element ",(0,t.jsx)(n.code,{children:"#app"}),", then locate the ",(0,t.jsx)(n.code,{children:"<user-card>"})," element within it."]}),"\n",(0,t.jsxs)(n.li,{children:["Enter the Shadow Root of the ",(0,t.jsx)(n.code,{children:"<user-card>"})," element."]}),"\n",(0,t.jsxs)(n.li,{children:["Locate the ",(0,t.jsx)(n.code,{children:".profile"})," element and enter its Shadow Root."]}),"\n",(0,t.jsxs)(n.li,{children:["Locate the ",(0,t.jsx)(n.code,{children:".save"})," button."]}),"\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsx)(n.strong,{children:"Save"})," button."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'Page DOM (main document)\r\n\u2514\u2500 Shadow Host (sr-1) [e.g. <custom-element id="outer-host">]\r\n    \u2514\u2500 Shadow DOM Level 1\r\n         \u2514\u2500 Shadow Host (sr-2) [e.g. <inner-element class="inner">]\r\n             \u2514\u2500 Shadow DOM Level 2\r\n                  \u2514\u2500 [Target Element, e.g. <button>]\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"why-are-only-css-selectors-used",children:"Why are only CSS selectors used?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Shadow DOM encapsulation prevents XPath from traversing its internal structure."}),"\n",(0,t.jsxs)(n.li,{children:["CSS selectors pierce Shadow Boundaries via ",(0,t.jsx)(n.code,{children:"::shadow"})," or ",(0,t.jsx)(n.code,{children:"/deep/"})," deprecation."]}),"\n",(0,t.jsx)(n.li,{children:"Ensures consistency and compatibility across browsers."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"troubleshooting-tips",children:"Troubleshooting Tips"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Shadow Host not found"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Verify that the parent scope exists within the current root."}),"\n",(0,t.jsx)(n.li,{children:"Check for typos in attribute names and values."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"No Shadow Root"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ensure the element is a Shadow Host (verify using DevTools)."}),"\n",(0,t.jsxs)(n.li,{children:["Use the ",(0,t.jsx)(n.code,{children:"allow-hidden"})," option if the element is not yet rendered."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Index Mismatches"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Explicitly specify indices (e.g., use ",(0,t.jsx)(n.code,{children:"sr 2"})," instead of just ",(0,t.jsx)(n.code,{children:"sr"}),")."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var r=s(96540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);